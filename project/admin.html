<html>
  <body>
    <h1>Hey </h1>
  </body>
  <script>
(async function () {
  try {
    // 1ï¸âƒ£ URL se email lo
    const params = new URLSearchParams(window.location.search);
    const email = params.get("email");

    // âŒ Email hi nahi â†’ direct URL access
    if (!email) {
      alert("âŒ Unauthorized access. Please login first.");
      window.location.href = "login.html";
      return;
    }

    // 2ï¸âƒ£ admins.json fetch karo
    const res = await fetch("admins.json");
    if (!res.ok) throw new Error("Admins file not found");

    const data = await res.json();
    const adminEmails = data.admins;

    // 3ï¸âƒ£ Email admin list me nahi hai
    if (!adminEmails.includes(email)) {
      alert("âŒ Access denied. Admin only.");
      window.location.href = "dashboard.html";
      return;
    }

    // âœ… Admin verified â†’ page allowed

    // ğŸ” OPTIONAL: URL se email hata do (extra safety)
    window.history.replaceState({}, document.title, "admin.html");

  } catch (err) {
    console.error("Admin guard error:", err);
    alert("âŒ Security error");
    window.location.href = "login.html";
  }
})();
</script>

</html>
